\documentclass{amsart}

\usepackage{notes}

\title{DAG Notes}
\date{\today}

\begin{document}

\maketitle

\section{Lecture 1, 6/26 (D. Arinkin) -- DG-Categories}

Arinkin's lectures aim to treat DG-categories as they are used in practice (without completely ignoring the foundations).
More focus will be given to the ``key parts'' of the theory than to technicalities.
We will treat foundations and geometrically-flavored examples (e.g. $\QCoh$ from a DG-perspective).

\subsection{Motivation}

In classical algebra and algebraic geometry, we like to consider modules over a ring.
We pass to resolutions to get things which behave better from a homological perspective.
This leads to considering derived categories.
What kind of objects are derived categories?

\begin{enumerate}
\item Derived categories are \emph{triangulated categories}.
This means that they are equipped with a notion of \emph{distinguished triangles} (also called \emph{exact triangles}), which capture the notion of mapping cones.
However, this structure can be poorly behaved.
\item Derived categories are \emph{DG-categories}, or (mostly equivalently) \emph{stable $\infty$-categories}.
Arinkin considers the DG category perspective to be more concrete.
Using this perspective changes something fundamental about the category (what we obtain is more complex than a typical $1$-category).
However, DG categories can be more robust, especially when considering the ``category of DG-categories.''
\end{enumerate}

\subsection{DG-categories and examples}

Fix a field $k$ (often we can get away with working over a commutative ring, but this may require more caution).
Let $\Csf(k)$ be the monoidal category of complexes of $k$-vector spaces, equipped with the tensor product $\otimes_k$ as monoidal structure.

\begin{dfn}
A \emph{DG-category} $\Asf$ consists of 
\begin{enumerate}
	\item A collection of objects $\Ob \Asf$
	\item For all $x, y \in \Ob \Asf$, a chain complex of morphisms $\Hom_{\Asf}(x, y) \in \Ob \Csf(k)$
	\item For all $x, y, z \in \Ob \Asf$, a composition law $\circ: \Hom_{\Asf}(x, y) \otimes \Hom_{\Asf}(y, z) \to \Hom_{\Asf}(x, z)$
\end{enumerate}
such that
\begin{enumerate}
	\item Composition is associative.
	\item Composition is unital: for all $x \in \Asf$, there exists a degree-zero cycle $\onebb_x \in \Hom_{\Asf}(x, x)$ (so $d(\onebb_x) = 0$) such that $\onebb_x \circ f = f$ and $g \circ \onebb_x = g$ for all $f, g$.
\end{enumerate}
\end{dfn}

\begin{ex}
We can consider the case where $\Hom(x, y)$ is always concentrated in degree zero.
This recovers the notion of a $k$-linear category.
\end{ex}

\begin{ex}
Let $R$ be a $k$-algebra.
We can turn $C(R)$ (the category of complexes of $R$-modules) into a DG-category by setting
\[
\Hom(M^\bullet, N^\bullet)^p = \prod_{q} \Hom_R(M^p, N^{p+q})
\]
with differential $d_{\Hom} = [d, -]$.
It is crucial here that we use the product rather than the direct sum (otherwise we run into issues when the complexes are not bounded).
\end{ex}

We can also construct some examples where the $\Hom$-complexes are standard complexes computing $\Ext$ groups.
This ties into the classical perspective on homological algebra, where derived functors are computed using explicit resolutions.

\begin{ex}
Let $R$ be a $k$-algebra.
We can define a DG-category $\Asf$ with $\Ob \Asf$ being $R$-modules and $\Hom_{\Asf}(M, N)$ being the standard complex computing $\Ext^\bullet(M, N)$ via the bar resolution.
We will not spell out the details here because this is not our emphasis.
\end{ex}

\begin{ex}
Let $k = \CC$, and fix a complex manifold $X$.
We can define a DG-category $\Asf$ with objects being holomorphic vector bundles on $X$ and $\Hom_{\Asf}(E, F)$ given by the Dolbeault complex
\[
\begin{tikzcd}
0 \rar & \Cc^\infty(E^* \otimes F) \rar["\ol{\partial}"] & \Omega^{0,1}(E^* \otimes F) \rar["\ol{\partial}"] & \dots
\end{tikzcd}
\]
\end{ex}

As stated above, our main examples of interest are really \emph{derived categories}.
We still need to build up some more definitions to get a good understanding of these.

\subsection{DG-Functors}

One would like to have a good notion of functors between DG-categories.
It turns out that the na\"ive definition of DG-functors works (and does not require homotopical corrections).

\begin{dfn}
A DG-functor $F: \Asf \to \Bsf$ consists of:
\begin{enumerate}
\item An assignment $F: \Ob \Asf \to \Ob \Bsf$
\item For every $x, y \in \Ob \Asf$, a chain map $\Hom_\Asf(x, y) \to \Hom_\Bsf(F(x), F(y))$
\end{enumerate}
which preserves identities and composition.
\end{dfn}

\begin{rmk}
While the obvious notion of a DG-functor works fine, subtleties arise when one considers the notion of equivalence.

One can first define a notion of \emph{strict equivalence}.
A DG-functor $F: \Asf \to \Bsf$ is a strict equivalence if
\begin{enumerate}
\item $F$ is strictly fully faithful: for all $x, y \in \Ob \Asf$, $\Hom_\Asf(x, y) \to \Hom_\Bsf(F(x), F(y))$ is an isomorphism.
\item $F$ is strictly essentially surjective: for all $y \in \Ob \Bsf$, there exists $x \in \Ob \Asf$ such that $F(x)$ is isomorphic to $y$.
\end{enumerate}
As one knows from the study of derived categories, the notion of ``isomorphism'' here is often too strong - one would rather consider quasi-isomorphisms or other weaker notions.

A better notion is that of \emph{quasi-equivalence}.
A DG-functor $F: \Asf \to \Bsf$ is a quasi-equivalence if
\begin{enumerate}
	\item $F$ is quasi-fully faithful: for all $x, y \in \Ob \Asf$, $\Hom_\Asf(x, y) \to \Hom_\Bsf(F(x), F(y))$ is a quasi-isomorphism.
	\item $F$ is quasi-essentially surjective: for all $y \in \Ob \Bsf$, there exists $x \in \Ob \Asf$ such that there exist maps $F(x) \to y$ and $y \to F(x)$ with the both compositions $F(x) \to F(x)$ and $y \to y$ homotopic to the relevant identities.
\end{enumerate}
\end{rmk}

\begin{exer}
For a DG-category $\Asf$, let $\Ho \Asf$ be the \emph{homotopy category} of $\Asf$, i.e.\ the $1$-category with the same objects as $\Asf$ and morphisms given by $\Hom_{\Ho \Asf}(x, y) = H^0(\Hom_{\Asf}(x, y))$.
\begin{enumerate}
\item Check that $\Ho \Asf$ is a well-defined $1$-category. (This uses the fact that the functor $H^0$ is lax monoidal.)
\item Show that a DG-functor $F: \Asf \to \Bsf$ is quasi-essentially surjective if and only if $\Ho F: \Ho \Asf \to \Ho \Bsf$ is essentially surjective.
\end{enumerate}
\end{exer}

\section{Lecture 2, 6/26 (B. Antieau) -- Motivation and the Functor of Points}

Antieau's lectures aim to treat the intuition and geometry behind DAG, without getting lost in the details.

\subsection{``Bird's Eye View'' and Examples}

We begin with a classical proposal of Serre.
Let $X$ be a regular variety, with $W, Y \subset X$ and $W \subset Y$ being a finite set of points.
We would like to count $W \cap Y$.
In the case of transverse intersections, this is easy, but in general we have to count with multiplicity.
If we move $W$ and $Y$ around, this count with multiplicity should not change.
Serre proposed that the intersection multiplicity at a point $z \in W \cap Y$ is given by
\[
\sum_{i \geq 0} (-1)^i \length_{k(z)} \Tor^i(\Oc(X)_z)(\Oc(X)_z / I_z, \Oc(Y) / I_z).
\]
It is not immediately obvious why this is a reasonable definition, but it turns out to work well in good cases.
One can show that (when working over a field) this intersection multiplicity is nonnegative.

\begin{ex}
Consider the intersection in $\AA^2$ of the curve $W = \{ y = x^2 \}$ with the $x$-axis $Y$.
One can compute that the intersection multiplicity is $2$ (coming exclusively from $\Tor^0$).
This makes sense: if we move the curves around, then we will get two actual intersection points.

For the Tor computation, we note $\Oc(W) = k[x, y] / (y - x^2)$ and $\Oc(Y) = k[x, y] / (y)$.
Then $\Oc(Y) \otimes_{\Oc(X)} \Oc(W) = k[x] / (x^2)$, and there are no higher Tor's.
This can be interpreted geometrically using the common tangent vector to $W$ and $Y$ at the origin.
\end{ex}

\begin{ex}
For the first historical example with higher $\Tor$s, we work in $\AA^4 = \Spec k[w, x, y, z]$.
Let $Y$ be the union of planes $P_1 \cup P_2 = \{ x = y = 0 \} \cup \{ z = w = 0 \}$, and let $W$ be the plane $\{ x = z, y = w\}$.
Then the $\Tor_0$ term is $3$-dimensional, but the ``correct'' intersection multiplicity should be $2$ (if we perturb $W$, it should meet each plane $P_i$ in a single point).
Thus we must use the $\Tor^1$ term to correct our intersection multiplicity.
\end{ex}

The main idea of derived algebraic geometry is that we should understand intersection multiplicities geometrically by replacing $\Oc(Y) \otimes_{\Oc(X)} \Oc(W)$ by a \emph{derived commutative ring} $\Oc(Y) \otimes_{\Oc(X)}^\Lbf \Oc(W)$.
In the affine case, ``$\Spec$'' of this should give the \emph{derived intersection} $Y \cap^\Lbf W = Y \times_X^\Lbf W$.
We will of course need to make sense of what this means.

Derived algebraic geometry also gives rise to interesting self-intersections, which we can use to understand what derived commutative rings and schemes should be.

\begin{ex}
Consider $\{0\} \subset \AA^1$, viewed as $\Spec$ of $k = k[x] / (x)$.
The classical self-intersection is $\{0\} \cap \{0\} = \{0\}$.
Note that this is not what we'd get if we moved the points (since two general points in $\AA^1$ do not meet).

For the derived self-intersection, we have 
\[
\pi_i(k \otimes_{k[x]}^\Lbf k) = \begin{cases}
	k & i = 0 \\
	k & i = 1 \\
	0 & i > 0.
\end{cases}
\]
For derived commutative rings, we say $\pi_i = H_i = H^{-i}$.
We can think of elements of $\pi_i$ for $i > 0$ as higher nilpotents / ``fuzz'' (in addition to the nilpotents that appear in $\pi_0$ when working scheme-theoretically).

Recall that in classical geometry, for commutative $k$-algebras $R$ and $S$, we have
\[
\Hom_{\Sch_k}(\Spec S, \Spec R) = \Hom_{\CAlg_k}(R, S).
\]
Note that the right hand side of this is a set.
For our example, we expect to have
\[
\Hom_{\dSch_k}(\{0\} \cap^\Lbf \{0\}, \AA^1) = \Oc(\{0\} \cap^\Lbf \{0\}) = k \otimes_{k[x]}^\Lbf k,
\]
which should be a ``space'' with $\pi_0 = \pi_1 = k$ (not just a set).

Furthermore, instead of considering abelian categories of quasicoherent sheaves on $\{0\} \cap^\Lbf \{0\}$, it makes much more sense to consider derived categories of quasicoherent sheaves.
One can still make sense of the abelian categories, but they don't see the interesting higher homotopy groups.
\end{ex}

Through considering this and other examples, we end up with some ideas about what ``derived replacements'' of concepts in classical algebraic geometry should be.

\begin{center}
	\begin{tabular}{c|c}
		Classical AG & Derived AG \\ \hline
		Commutative rings $R$ & Derived commutative rings $R$ \\
		Affine schemes $\Spec R$ & Derived affine schemes $\Spec R$ \\
		Sheaves of sets & Sheaves of homotopy types \\
		Abelian categories $\QCoh(X)$ & DG-categories (or stable $\infty$-categories) $\Dsf_qc(X)$
	\end{tabular}
\end{center}

\subsection{Presheaves and Yoneda}

Let $\Csf$ be a category.
Write $\Psh(\Csf)^\heartsuit = \Fun(\Csf\op, \Set)$ for the \emph{category of presheaves of sets} on $\Csf$.
Objects of this category are functors $F: \Csf\op \to \Set$, and morphisms are natural transformations of functors.

There is a natural \emph{Yoneda embedding} $h: \Csf \to \Psh(\Csf)^\heartsuit$, defined by $h(X) = h_X$, where $h_X(Y) = \Hom_\Csf(Y, X)$.

\begin{lem}[Yoneda]
\,
\begin{enumerate}
	\item The Yoneda embedding $h: \Csf \to \Psh(\Csf)^\heartsuit$ is fully faithful, i.e.\ $\Hom_\Csf(X, Y) \cong \Hom_{\Psh(\Csf)^\heartsuit}(h_X, h_Y)$ naturally in $X, Y$.
	\item For any $F \in \Psh(\Csf)^\heartsuit$, there is a natural isomorphism $F(X) \cong \Hom_{\Psh(\Csf)^\heartsuit}(h_X, F)$.
\end{enumerate}
\end{lem}

\begin{proof}
The first statement follows from the second by taking $F = h_Y$ in the second.
To prove the second statement, we can construct explicit natural isomorphisms as follows.
To get $\Hom_{\Psh(\Csf)^\heartsuit}(h_X, F) \to F(X)$, start with $f: h_X \to F$, and evaluate $f$ on $\id_X \in h_X(X)$ to get an element of $F(X)$.
Conversely, given $g \in F(X)$, construct a natural fransformation $h_X \to F$ by sending $a \in h_X(Y) = \Hom_\Csf(Y, X)$ to $F(a)(g) \in F(Y)$.
One can check that these are both natural and mutually inverse. 
\end{proof}

\begin{ex}
Let $\Delta^1$ be the category with two objects $0, 1$ and one non-identity morphism $0 \to 1$.
Then $\Psh(\Delta^1)^\heartsuit$ is the category of arrows in $\Set$.
The functor $h_0$ corresponds to the arrow $\emptyset \to *$, and the functor $h_1$ corresponds to the arrow $* \to *$.
\end{ex}

\subsection{Topologies and sheaves}

\begin{dfn}
A map $f: R \to S$ in $\CAlg_k$ is \emph{flat} if the functor $S \otimes_R (-): \Mod_R \to \Mod_S$ is exact.
We say that $f$ is furthermore \emph{faithfully flat} if $S \otimes_R (-)$ is conservative (i.e.\ for $g: M \to N$, if $S \otimes g: S \otimes_R M \to S \otimes_R N$ is an isomorphism, then $g$ must have already been an isomorphism).
\end{dfn}

\begin{ex}
\,
\begin{enumerate}
	\item For any $R$, the map $R \to 0$ is flat but not faithfully flat.
	\item The map $\ZZ \to \QQ$ is flat but not faithfully flat.
	\item Any field extension $K \to L$ is faithfully flat.
	\item For $f, g \in R$ with $(f, g) = 1$, the map $R \to R[f\inv] \times R[g\inv]$ is faithfully flat.
	Note that this gives a Zariski cover of $\Spec R$.
\end{enumerate}
\end{ex}

Let $\Aff_k = \CAlg\op$ be the \emph{category of affine $k$-schemes}.
We will define some topologies on $\Aff_k$.

\begin{dfn}
\,
\begin{enumerate}
	\item The \emph{fpqc topology} on $\Aff_k$ has coverings of $\Spec R$ generated by those of the form $\{ \Spec S_i \to \Spec R\}_{i \in I}$ where $I$ is finite, each $R \to S_i$ is flat, and $R \to \prod_i S_i$ is faithfully flat.\footnote{Note the ``generated by'' -- we allow infinite covers.}
	\item For the \emph{fppf topology}, we require furthermore that each $S_i$ is of finite presentation over $R$ (i.e.\ $S_i = R[x_1, \dots, x_p] / (f_1, \dots, f_q)$ for some $x_i$ and $f_j$.)
	\item For the \emph{\'etale topology}, we require furthermore that each $S_i$ is \'etale over $R$ (i.e.\ $S_i$ is smooth over $R$ with $\Omega^1_{S_i/R} = 0$).
	\item For the \emph{Zariski topology}, we require furthermore that each $S_i$ is of the form $R[f\inv]$ for some $f \in R$.
\end{enumerate}
\end{dfn}

\section{Lecture 3, 6/27 (B. Antieau) -- More on Functor of Points, Introduction to $\infty$-categories}

\subsection{Topologies and sheaves, continued}

Let $\tau$ be one of the topologies on $\Aff_k$ mentioned last time.
Define a full subcategory $\Sh_\tau(\Aff_k)^\heartsuit \subset \Psh(\Aff_k)^\heartsuit$, the \emph{category of sheaves for the $\tau$-topology}, by declaring $\Fc \in \Sh_\tau(\Aff_k)^\heartsuit$ if and only if for all $\tau$-covers $\Spec S \to \Spec R$, the natural diagram
\[
	\Fc(R) \to \Fc(S) \rightrightarrows \Fc(S \otimes_R S)
\]
is an equalizer diagram.
In more pedestrian language, $\Fc(R)$ is the subset of elements $x \in \Fc(S)$ such that the two images of $x$ in $\Fc(S \otimes_R S)$ agree.
One should think of $\Spec S$ as a collection of opens of $\Spec R$.
From this perspective, $\Spec S \otimes_R S$ is the collection of intersections of the opens appearing in $\Spec S$.

There was a question about whether we need to impose a condition on compatibility with products to account for the case of covers of the form $\{ \Spec S_i \to \Spec R \}_{i \in I}$.
Antieau claimed that this condition is superfluous and that it would be a good exercise to deduce this compatibility from the definition of $\Sh_\tau(\Aff_k)^\heartsuit$.

\begin{thm}[Grothendieck]
The presheaf $\Spec R \mapsto R$ is a sheaf for the $\tau$-topologies.
\end{thm}

\begin{proof}
This follows from faithfully flat descent, i.e.\ the exactness of
\[
R \to S \to S \otimes_R S
\]
for a faithfully flat ring map $R \to S$.
\end{proof}

\begin{exer}
We can view $\Spec R$ as a presheaf on $\Aff_k$ via $(\Spec R)(\Spec S) = \Hom_{\CAlg_k}(R, S)$.
Show that this is a $\tau$-sheaf.
Thus the topologies $\tau$ mentioned above are subcanonical (i.e.\ representable presheaves are sheaves.
\end{exer}

The inclusion $\Sh_\tau(\Aff_k)^\heartsuit \subset \Psh(\Aff_k)^\heartsuit$ admits a left adjoint, known as $\tau$-sheafification and written $a_\tau$.
Here we are secretly ignoring some potential set-theoretic issues (which can be dealt with systematically using Grothendieck universes).

\begin{rmk}
	If $\Dsf \to \Psh(\Csf)^\heartsuit$ is a fully faithful map of categories that admits a left adjoint (which satisfies the mild set-theoretic hypothesis of being $\kappa$-accessible for some $\kappa$), we call $\Dsf$ a \emph{presentable category}.
	If furthermore the left adjoint $\Psh(\Csf)^\heartsuit \to \Dsf$ preserves finite limits, we call $\Dsf$ a \emph{topos}.
	Topoi generally behave like categories of sheaves.
\end{rmk}

\subsection{Representable morphisms}

For a scheme $Z$, we get a $\tau$-sheaf $h_Z \in \Sh_\tau(\Aff_k)^\heartsuit$ via $h_Z(\Spec R) = \Hom_{\Sch_k}(\Spec R, Z)$.

\begin{thm}
	The functor $h_{(-)}: \Sch_k \to \Sh_\tau(\Aff_k)^\heartsuit$ is fully faithful.
\end{thm}

Thus we may identify $h_Z$ with $Z$ for any scheme $Z$.
Note that this is not quite the Yoneda lemma (we are viewing a scheme as a $\tau$-sheaf on affine schemes, not all schemes), but it is closely related.
The key idea is that schemes are constructed from gluing affine schemes, and meditating on this enough yields a proof of the above theorem.

\begin{dfn}
	A morphism $X \to Y$ in $\Sh_\tau(\Aff_k)^\heartsuit$ is \emph{representable in schemes} if, for all $\Spec R \to Y$, the fiber product $P = X \times_Y \Spec R$ is representable (i.e.\ isomorphic to $h_Z$ for some scheme $Z$).
\end{dfn}

We can generalize standard geometric properties of schemes to properties of representable morphisms by imposing said properties on base changes to (affine) schemes.
For example:

\begin{dfn}
	A morphism of $\tau$-sheaves $X \to Y$ is open if it is representable in schemes and for all $\Spec R \to Y$, the base change $X \times_Y \Spec R \to \Spec R$ is a disjoint union of open embeddings of schemes.
\end{dfn}

The terminology here is a bit lazy and is designed primarily to make the next theorem straightforward.
We would like to characterize the essential image of the embedding $h_{(-)}: \Sch_k \to \Sh_\tau(\Aff_k)^\heartsuit$.

\begin{thm}
A $\tau$-sheaf $X$ is isomorphic to $h_Z$ for some $Z \in \Sch_k$ if and only if it admits an open surjective map $\coprod_i \Spec S_i \to X$.
\end{thm}

\subsection{Examples}

Here we will define some schemes by their functors of points.

\begin{ex}
	Let $X \in \Sh_\tau(\Aff_k)^\heartsuit$ be given by
	\[
		X(R) = \{ (x, y) \in R^2 \, | \, x^2 + y^2 = 1 \}.
	\]
	Then we can represent $X$ by $\Spec k[x, y] / (x^2 + y^2 - 1)$.
\end{ex}

\begin{ex}
	The additive group $\GG_a$ is given by $\GG_a(R) = R$.
	In terms of coordinate rings, we have $\GG_a = \Spec k[x]$.
\end{ex}

\begin{ex}
	The multiplicative group $\GG_m$ is given by $\GG_m(R) = R^\times$.
	In terms of coordinate rings, we have $\GG_m = \Spec k[x, x\inv]$.
\end{ex}

\begin{ex}
	We can na\"ively try to define $X = \PP^n_k$ via the functor of points $X(R) = (R^{n+1} \setminus \{ 0 \}) / R^\times$.
	However, this fails -- the $X$ we define here is not even a functor!
\end{ex}

\begin{ex}
	The correct definition of $\PP^n_k$ is via the functor of points
	\[
		\PP^n_k(R) = \{ (P, q) \, | \, P \textrm{a rank $1$ projective module over $R$}, q: R^{n+1} \twoheadrightarrow P \}.
	\]
\end{ex}

\begin{exer}
	Use the theorem of the preceding section to show that $\PP^n_k$ is a scheme.
\end{exer}

\subsection{$\infty$-categories}

Let's move on to a new topic.
As in Arinkin's lectures, we would like to replace $1$-categories with categories ``enriched in spaces up to weak homotopy equivalence''.
Taking this literally (i.e.\ using actual topological spaces) turns out to be hard to work with, so we will instead use the formalism of quasi-categories.

Let $\Delta$, the \emph{simplex category}, be the category of nonempty finite totally ordered sets and order-preserving functors.
Every object of $\Delta$ is isomorphic to some $[n] = \{ 0 \leq 1 \leq \dots \leq n \}$ for some $n \geq 0$.
We are particularly interested in the \emph{face maps} $\partial^i: [n] \to [n+1]$ for $i = 0, \dots, n+1$ (with $\partial^i$ being the injective map missing the element $i \in [n+1]$ and otherwise bijective) and the \emph{degeneracy maps} $s^i: [n] \to [n-1]$ for $i = 0, \dots, n+1$ (with $s^i$ being the surjective map hitting the element $i$ twice and otherwise bijective).

A \emph{simplicial set} is a presheaf on $\Delta$, and we write the category of simplicial sets as $\sSet = \Fun(\Delta\op, \Set) = \Psh(\Delta)^\heartsuit)$.
More generally, the category of simplicial objects in a category $\Csf$ is $\ssf\Csf = \Fun(\Delta\op, \Csf)$.
Dually, the category of cosimplicial objects in $\Csf$ is $\csf\Csf = \Fun(\Delta, \Csf)$.

\begin{ex}
	Let $X$ be a topological space.
	We can define the singular simplicial set of $X$ as $\Sing_\bullet(X) = \Hom_{\Top}(\Delta^\bullet_{\mathrm{top}}, X)$.
	That is, $\Sing_n(X) = \Hom_{\Top}(\Delta^n_{\mathrm{top}}, X)$ where 
	\[
		\Delta^n_{\mathrm{top}} = \{ (x_0, \dots, x_n) \in \RR^{n+1} \, | \, x_i \geq 0 \forall i, \textrm{ and } \sum_{i} x_i = 1\}.
	\]
	Note that $\Delta^\bullet_{\mathrm{top}} \in \csf\Top$.
	Applying the free abelian group functor $\ZZ[-]: \Set \to \Ab$ to $\Sing^\bullet(X)$ gives a simplicial abelian group from $X$.
	Via the Dold-Kan correspondence, this corresponds to a connective chain complex $C_\bullet(X, \ZZ)$ which computes $H_\bullet(X, \ZZ)$.
\end{ex}

\begin{ex}
	Let $\Csf$ be a (small) category.
	We can define a simplicial set $\Nsf_\bullet \Csf$, the \emph{nerve of $\Csf$}, by setting $\Nsf_n(\Csf) = \Hom_{\Cat}([n], \Csf)$, where we view $[n]$ as the category $(0 \to 1 \to \dots \to n)$.
	Here $\Nsf_0(\Csf) = \Ob \Csf$, $\Nsf_1(\Csf)$ is the set of all morphisms in $\Csf$, and $\Nsf_2(\Csf)$ is the set of all composable pairs of morphisms in $\Csf$.
\end{ex}

\begin{cons}
	Consider the left Kan extension $|-|: \sSet \to \Top$ in
	%\[
	%	\begin{tikzcd}
	%		\Delta \rar["\Delta^\bullet_{\mathrm{top}}"] \dar["[n] \mapsto \Delta^n"] & \Top \\
	%		\sSet \ar[ur, dashed, "|-|"]
	%	\end{tikzcd}.
	%\]
\[
\begin{tikzcd}
\Delta \arrow[r, "\Delta^\bullet_{\mathrm{top}}"] \arrow[d, "{[n]} \mapsto \Delta^n"] & \mathrm{Top} \\
\sSet \arrow[ur, dashed, "|-|"]
\end{tikzcd}
\]
	We call this functor \emph{geometric realization}.
\end{cons}

\begin{ex}
	Here $|\Delta^n| = \Delta^n_{\mathrm{top}}$.
	Let $\partial \Delta^n$ be the subsimplicial set of $\Delta^n$ missing the unique nondegenerate $n$-simplex.
	Then $|\partial \Delta^n| \simeq S^{n-1}$.
\end{ex}

We define the horn $\Lambda_i^n$ as the subsimplicial set of $\Delta^n$ missing the $i$th face of $\Delta^n$ (i.e.\ the face opposite to the $i$th vertex).

\begin{exer}
	Consider the problem of extending a map of simplicial set $\Lambda_i^n \to X_\bullet$ along the inclusion $\Lambda_i^n \to \Delta^n$.
	\begin{enumerate}
		\item For a topological space $Y$ and $X_\bullet = \Sing_\bullet(Y)$, show that lifts exist for all horns $\Lambda_i^n$.
		Stated differently, $Y$ is a \emph{Kan complex} or \emph{$\infty$-groupoid}.
		This is easiest understood using the corresponding diagrams
		\[
			\begin{tikzcd}
				\Lambda^n_i \rar \dar & \Sing_\bullet(Y) \dar \\
				\Delta^n \rar & \pt
			\end{tikzcd}
			\Leftrightarrow
			\begin{tikzcd}
				{|\Lambda^n_i|} \rar \dar & Y \dar \\
				\Delta^n_{\mathrm{top}} \rar & \pt
			\end{tikzcd}
		\]
		\item For a category $\Csf$ and $X_\bullet = \Nsf_\bullet \Csf$, show that extensions exist for all inner horns (i.e.\ when $0 < i < n$).
	\end{enumerate}
\end{exer}

\begin{dfn}
	An $\infty$-category or quasi-category is a \emph{weak Kan complex}, i.e.\ a simplicial set $X_\bullet$ such that any map $\Lambda_i^n \to X_\bullet$ (with $0 < i < n$) extends to a map $\Delta^n \to X_\bullet$.
\end{dfn}

Thus singular simplicial sets and nerves are both examples of $\infty$-categories.

Studying $\infty$-categories will allow us to achieve our goal of unifying homotopy theory and category theory.
Namely, there is a model structure on $\sSet$ such that if we invert weak equivalences, we get a category (Quillen?)-equivalent to $\Top$ with weak homotopy equivalences inverted.
There was some discussion of ``Joyal model structures'' but I missed it.

\section{Lecture 4, 6/27 (D. Arinkin) - Derived Categories}

Recall what we did last time.
If $\Asf$ is a DG-category, then $\Hom_\Asf(x, y)$ is a chain complex for all $x, y \in \Ob \Asf$.
DG-functors are defined ``na\"ively, but (quasi-)equivalences are not.
A quasi-equivalence is required to be quasi-fully faithful and quasi-essentially surjective.
This comes from the natural weakening of the notion of ``inverses,'' i.e.\ requiring that quasi-equivalences are only invertible ``up to homotopy.''

\subsection{Construction of Derived Categories -- Strategy}

For a (DG-)ring $R$, we would like to move from the DG-category $\Csf(R)$ of complexes of $R$-modules to the corresponding derived category $\Dsf(R)$.

\begin{ex}
	A DG-category with a single object $x$ can be identified with a DG-ring $R$, namely $R = \End(x)$.
\end{ex}

There are two well-known approaches to constructing $\Dsf(R)$.

\begin{enumerate}
	\item One approach is via localization: we invert quasi-isomorphisms in $\Csf(R)$.
		To make this work in the DG-context, one can see Drinfeld's paper ``DG-quotients of DG-categories.''
		It may be surprising that we use quotients to construct localizations.
		In fact, when working with DG-categories, localizations and quotients are effectively equivalent: inverting a morphism $f$ is the same as killing the object $\cone(f)$.
	\item Another approach is to resolve all objects of $\Csf(R)$.
		This is analogous to choosing good representatives in each equivalence class in the quotient.
\end{enumerate}

We will focus on the latter approach (using resolutions) for now.

\subsection{The classical viewpoint}

\begin{ex}
	The bounded below derived category $\Dsf^-(R)$ is equivalent to the (DG-)category $\Csf^-(R)^{\mathrm{proj}}$ of bounded above complexes of projective modules.
	If one likes, one could take this as a definition of $\Dsf^-(R)$.
	One could also prove this using a different definition of $\Dsf^-(R)$ by showing that the notions of equivalence in $\Dsf^-(R)$and $\Csf^-(R)^{\mathrm{proj}}$ match up.
\end{ex}

An analogous approach (using injective modules) works for $\Dsf^+(R)$.
It takes some more work to find an analogous description of $\Dsf(R)$, but this can still be treated classically.

The classical idea (due to Spaltenstein) says that we should resolve an unbounded complex
\[
	\begin{tikzcd}
		\dots \rar & A^{-1} \rar & A^0 \rar & A^1 \rar & \dots
	\end{tikzcd}
\]
by truncating $A^\bullet$ and resolving the truncations.
Consider first the clean truncation $\tau_{\leq 0} A^\bullet$, and resolve by a complex of projectives:
\[
	\begin{tikzcd}
		\dots \rar & A^{-1} \rar & A^0 \rar & d(A^0) \rar & 0 \rar & \dots \\
		\dots \rar & P_{(0)}^{-1} \rar \uar & P_{(0)}^0 \rar \uar & P_{(0)}^1 \rar \uar & 0 \rar \uar & \dots.
	\end{tikzcd}
\]
We can come up with a different resolution for the clean truncation $\tau_{\leq 1} A^\bullet$:
\[
	\begin{tikzcd}
		\dots \rar & A^{-1} \rar & A^0 \rar & A^1 \rar & d(A^1) \rar & 0 \rar & \dots \\
		\dots \rar & P_{(1)}^{-1} \rar \uar & P_{(1)}^0 \rar \uar & P_{(1)}^1 \rar \uar & P_{(1)}^2 \rar \uar & 0 \rar \uar & \dots.
	\end{tikzcd}
\]
Since these are resolutions and we have a map $\tau_{\leq 0} A^\bullet \to \tau_{\leq 1} A^\bullet$, we obtain a map $P_{(0)}^\bullet \to P_{(1)}^\bullet$.
Continuing inductively, we get a sequence of bounded above complexes of projectives $P_{(i)}^\bullet$ with maps $P_{(i)}^\bullet \to P_{(i+1)}^\bullet$.
Using mapping cylinders, we can assume that each $P_{(i)}^\bullet \to P_{(i+1)}^\bullet$ is injective (at the chain level), so let $P^\bullet = \cup_i P_{(i)}^\bullet$.
Thus we obtain an unbounded complex of projectives $P^\bullet$ with a quasi-isomorphism $P^\bullet \to A^\bullet$.

The key property of $P^\bullet$ that we will be using is \emph{$K$-projectivity}, also called \emph{homological projectivity}.
This property states that for any acyclic complex $C^\bullet$, the $\Hom$-complex $\Hom(P^\bullet, C^\bullet)$ is acyclic.
One can show that $\Dsf(R)$ is equivalent to the category of $K$-projective complexes in $\Csf(R)$.
In the DG-context, one either takes this as a definition or proves the equivalence (starting from the definition of $\Dsf(R)$ as a quotient mentioned earlier).

\begin{rmk}
	Note that we could have replaced ``projective'' by ``free'' throughout, and nothing would have changed.
\end{rmk}

Note that homotopical projectivity does not follow from the fact that $P^\bullet$ is a complex of projectives (in the unbounded case).

\begin{ex}
	Take $R$ = $\ZZ / 4 \ZZ$, and let $P^\bullet$ be the complex of projectives defined by $P^i = R$ for all $i$, with all differentials given by multiplication by $2$.
	For $C^\bullet = P^\bullet$ (which is acyclic), we can compute that $\Hom(P^\bullet, C^\bullet)$ is not acyclic (due to the presence of the identity map, which in this case is not homotopic to $0$).
	If one wants to work over a field, one could instead use $k[x] / (x^2)$ or something similar.
	This example leads to much theory (related to categories of singularities, matrix factorizations, Eisenbud periodicity, etc.).
	The problem here is related to $R$ not being regular.
\end{ex}

Note however that bounded above complexes of projectives are homotopically projective.
To prove that our original $P^\bullet$ is homotopically projective, we would want to reduce to the case of bounded above complexes of projectives.

\subsection{Semi-free modules}

We will now study how to make this work in the DG-context.
Let $R$ be a DG-ring.
The term ``module'' will now be used for a (potentially unbounded) complex of $R$-modules. 

\begin{dfn}
	A \emph{free module} is a chain complex of the form $\oplus_{n \in \ZZ} R^{I_n}[n]$.
	A \emph{semi-free module} is a chain complex $M^\bullet = \cup_{i \geq 0} M_i^\bullet$ such that $M_{i+1} / M_i$ is free for all $i$.
	In this case, the differential satisfies $d(M_{i+1}) \subset M_i$, i.e.\ is ``strictly upper triangular.''
\end{dfn}

\begin{ex}
	If $R$ is a classical ring, a bounded above complex of free modules
	\[
		\begin{tikzcd}
			\dots \rar & F^{-2} \rar & F^{-1} \rar & F^0 \rar & 0 \rar & \dots
		\end{tikzcd}
	\]
	is semi-free.\footnote{If $R$ is not classical, this complex doesn't really make sense, at least na\"ively.}
\end{ex}

\begin{ex}
	More generally (but still for $R$ classical), consider an increasing union
	\[
		\begin{tikzcd}
			\dots \rar & F_{(0)}^{-2} \rar \dar[hookrightarrow] & F_{(0)}^{-1} \rar \dar[hookrightarrow] & F_{(0)}^0 \rar \dar[hookrightarrow] & 0 \rar \dar[hookrightarrow] & \dots
			\dots \rar & F_{(1)}^{-2} \rar \dar[hookrightarrow] & F_{(1)}^{-1} \rar \dar[hookrightarrow] & F_{(1)}^0 \rar \dar[hookrightarrow] & F_{(1)}^{1} \rar \dar[hookrightarrow] & \dots
			\dots \rar & \dots \rar & \dots \rar & \dots \rar & \dots \rar & \dots
		\end{tikzcd}
	\]
	where each $F_{(i)}^k / F_{(i-1)}^k$ is free.
	Then the union $\cup_{i \geq 0} F_{(i)}^k$ is semi-free.
\end{ex}

\begin{prop}
	Semi-free modules are homotopically projective.
\end{prop}

\begin{prop}
	Every module admits a semi-free resolution.
\end{prop}

\end{document}
